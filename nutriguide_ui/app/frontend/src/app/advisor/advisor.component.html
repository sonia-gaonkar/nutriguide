<div class="main-content">

    <main id="main">

        <!-- ======= Breadcrumbs Section ======= -->
        <section class="breadcrumbs">
          <div class="container">
    
            <div class="d-flex justify-content-between align-items-center">
              <h2>Nutritional Advisor</h2>
              <ol>
                <li><a href="index.html">Home</a></li>
                <li>Advisor</li>
              </ol>
            </div>
    
          </div>
        </section><!-- End Breadcrumbs Section -->
    
        <section class="inner-page" style="padding: 15px 0;">
          <div class="container">
            <p style="margin-bottom: 25px;">Pose a question about a food item or upload an image to discover the best options for you based on your health profile.</p>

            <div *ngIf="!chatResponse && !showspinner">
              <div class="row">
                <div class="col-md-4">
                  <img src="assets/img/chatbot1.gif" style="width: 300px;">
                </div>
                <div class="col-md-8">
                  <h3>Hello, I'm <span style="color: #1acc8d;">NutriPal!</span></h3>
                  <h4 style="margin-top: 15px; margin-bottom: 18px;">How can I assist you today?</h4>
                  <p> Feel free to ask me anything about food and diet, and I'll provide answers tailored to your health profile. </p>
                  <p style="line-height: 25px;"> Whether you're seeking advice on meal planning, nutrition, or specific dietary concerns, I'm committed to providing you with tailored responses that take your unique health profile into account. </p>
                </div>
              </div>
            </div>

            <main class="" style="height: 320px; overflow: overlay;">
              <div class="loader" *ngIf="showspinner" style="margin-top: 15%; margin-left: 50%;"></div>
              <div class="msg right-msg" *ngIf="chatResponse">
                <div class="msg-img" style="background-image: url(https://image.flaticon.com/icons/svg/145/145867.svg)">
                  <img src="assets/img/girl.png" class="img-fluid animated" alt="" style="width: 50px;">
                </div>
                <div class="msg-bubble">
                  <div class="msg-info">
                    <div class="msg-info-name">User</div>
                  </div>
                  <div class="msg-text">
                    {{chatquery}}
                  </div>
                </div>
              </div>

              <div class="msg left-msg" *ngIf="chatResponse">
                <div class="msg-img">
                  <img src="assets/img/bot.png" class="img-fluid animated" alt="">
                </div>
          
                <div class="msg-bubble">
                  <div class="msg-info">
                    <div class="msg-info-name">NutriPal</div>
                  </div>          
                  <div class="msg-text" [innerHTML]="chatResponse"></div>
                </div>
              </div>
            </main>                     
            
            <!-- <div class="chatResponse">{{chatResponse}}</div> -->
            <br><br>
            <form #chatForm="ngForm" name="chatForm" id="chatForm" novalidate>
              <div class="chatbox">
                <textarea (keyup)="autoGrowTextZone($event)" placeholder="Enter your query here" name="chatQuery" id="chatQuery" ngModel style="border-radius: 5px; border: none;"></textarea>
                <!-- <button type="submit" (click)="submitChat(chatForm)" style="border: none; background: none;"><img src="assets/img/submit.png" class="img-fluid animated" alt="" style="width: 25px; margin-top: -20px;  margin-left: 10px;"></button> -->
                <button type="submit" (click)="getChatResponse(chatForm, 'USER_QUERY')" style="border: none; background: none; vertical-align: top;">
                  <svg xmlns="http://www.w3.org/2000/svg" width="2.3em" height="2.3em" viewBox="0 0 32 32"><path fill="white" d="m27.45 15.11l-22-11a1 1 0 0 0-1.08.12a1 1 0 0 0-.33 1L7 16L4 26.74A1 1 0 0 0 5 28a1 1 0 0 0 .45-.11l22-11a1 1 0 0 0 0-1.78m-20.9 10L8.76 17H18v-2H8.76L6.55 6.89L24.76 16Z"/></svg>
                </button>
                
                <button (click)="showImageLink(true)" style="border: none; background: none; vertical-align: top;">
                  <svg xmlns="http://www.w3.org/2000/svg" width="2.3em" height="2.3em" viewBox="0 0 32 32"><path fill="white" d="M19 14a3 3 0 1 0-3-3a3 3 0 0 0 3 3m0-4a1 1 0 1 1-1 1a1 1 0 0 1 1-1"/><path fill="white" d="M26 4H6a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h20a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2m0 22H6v-6l5-5l5.59 5.59a2 2 0 0 0 2.82 0L21 19l5 5Zm0-4.83l-3.59-3.59a2 2 0 0 0-2.82 0L18 19.17l-5.59-5.59a2 2 0 0 0-2.82 0L6 17.17V6h20Z"/></svg>
                </button>
                
                <input *ngIf="showImgLink==true" type="text" name="imageLink" id="imageLink" ngModel placeholder="Paste your image link here" style="width: 90%; border-radius: 5px; border: none; height: 30px;" (blur)="setImageThumbnail()"> <span style="margin-left:-15px; cursor: pointer;" *ngIf="showImgLink==true" (click)="clearText('imageLink')">x</span>
                <br />
                <img *ngIf="showImgLink1==true" src="{{imgThumbnail}}" alt="" style="width: 60px; height: 60px; margin-top: 5px;">
              </div>
            </form>
          </div>
        </section>
    
      </main><!-- End #main -->

</div>
